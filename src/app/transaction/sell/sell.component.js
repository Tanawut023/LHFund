"use strict";var __decorate=this&&this.__decorate||function(e,t,s,i){var l,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var r=e.length-1;0<=r;r--)(l=e[r])&&(n=(o<3?l(n):3<o?l(t,s,n):l(t,s))||n);return 3<o&&n&&Object.defineProperty(t,s,n),n};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),operators_1=require("rxjs/operators"),dateformat_1=require("../../Share/dateformat"),http_1=require("@angular/common/http"),SellComponent=function(){function e(e,t,s){this.translate=e,this.basedataservice=t,this.orderservice=s,this.page="sell",this.userall={},this.userselect={},this.unitholderno="N/A",this.currentdate=dateformat_1.datethai,this.unitholderredemption={},this.fundlist="N/A",this.banklist="N/A",this.holdingbalancelist="N/A"}return e.prototype.ngOnInit=function(){this.getSelectListUnitholder(),$("#mutual-tab-menu").find("li").removeClass("current"),$("#mutual-tab-menu").find("li#menu2").addClass("current")},e.prototype.checkpage=function(e){switch(window.scroll(0,0),console.log(e),e){case"sell":this.page="sell";break;case"sell-step1":this.date=this.datepick.year+"-"+this.datepick.month+"-"+this.datepick.day,this.date=dateformat_1.formatdatethai(this.date),this.page="sell-step1";break;case"sell-step2":this.page="sell-step2";break;case"sell-view-list":this.page="sell-view-list";break;default:this.page="sell",console.log(this.page)}},e.prototype.onChange=function(){for(var e=0;e<this.userall.unitholderlist.length;e++)this.userall.unitholderlist[e].UnitholderId==this.unitholderno.UnitholderId&&(this.userselect=this.userall.unitholderlist[e],this.getselectlistfundlistandbankaccount());this.holdingbalanceselected=this.holdingbalancelist},e.prototype.getSelectListUnitholder=function(){var t=this;this.basedataservice.getSelectListUnitholder().pipe(operators_1.first()).subscribe(function(e){e&&(t.userall=e,t.unitholderno=t.userall.unitholderlist[0],t.userselect=t.userall.unitholderlist[0],t.getselectlistfundlistandbankaccount())},function(e){console.log(e)})},e.prototype.getselectlistfundlistandbankaccount=function(){var t=this,e=(new http_1.HttpParams).set("unitholderid",this.userselect.UnitholderId);this.orderservice.changeunitholderredemption(e).pipe(operators_1.first()).subscribe(function(e){console.log(e),e&&(t.unitholderredemption=e,t.unitholderredemption.fundlist&&(t.fundlist=t.unitholderredemption.fundlist[0]),t.unitholderredemption.bankaccountlist&&(t.banklist=t.unitholderredemption.bankaccountlist[0]),t.unitholderredemption.holdingbalance&&(t.holdingbalancelist=t.unitholderredemption.holdingbalance[0],t.holdingbalanceselected=t.unitholderredemption.holdingbalance[0]))},function(e){console.log(e)})},e.prototype.fundlistonChange=function(){this.holdingbalanceselected=this.holdingbalancelist},e.prototype.getorderinfolist=function(){var t=this,e={UnitHolderID:this.userselect.UnitholderId};this.orderservice.getorderinfolist(e).pipe(operators_1.first()).subscribe(function(e){console.log(e),t.orderredemptionlist=e},function(e){console.log(e),e.messages&&(t.message=e.messages,$("#message").modal({backdrop:"static",keyboard:!1,show:!0}))})},e=__decorate([core_1.Component({selector:"app-sell",templateUrl:"./sell.component.html",styleUrls:["./sell.component.scss"]})],e)}();exports.SellComponent=SellComponent;