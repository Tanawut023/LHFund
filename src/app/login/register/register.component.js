"use strict";function passwordConfirming(t){if(t.parent&&t){var e=t.parent.get("password"),r=t.parent.get("repeatPassword");if(e&&r)return e.value!==r.value?{invalid:!0}:void 0}}var __decorate=this&&this.__decorate||function(t,e,r,o){var i,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;0<=n;n--)(i=t[n])&&(s=(a<3?i(s):3<a?i(e,r,s):i(e,r))||s);return 3<a&&s&&Object.defineProperty(e,r,s),s},__awaiter=this&&this.__awaiter||function(a,s,n,l){return new(n||(n=Promise))(function(t,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function o(t){try{i(l.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(r,o)}i((l=l.apply(a,s||[])).next())})},__generator=this&&this.__generator||function(r,o){function t(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,a&&(s=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(a,e[1])).done)return s;switch(a=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return n.label++,{value:e[1],done:!1};case 5:n.label++,a=e[1],e=[0];continue;case 7:e=n.ops.pop(),n.trys.pop();continue;default:if(!(s=0<(s=n.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){n=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){n.label=e[1];break}if(6===e[0]&&n.label<s[1]){n.label=s[1],s=e;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(e);break}s[2]&&n.ops.pop(),n.trys.pop();continue}e=o.call(r,n)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var i,a,s,e,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),forms_1=require("@angular/forms"),RegisterComponent=function(){function t(t,e,r,o,i){this.fb=t,this.route=e,this.router=r,this.translate=o,this.authenticationService=i,this.page="signup1",this.blind="",this.isNotValid=!1,o.addLangs(["th","en"])}return Object.defineProperty(t.prototype,"cpwd",{get:function(){return this.formstep2.get("repeatPassword")},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.createFormValidate(),this.foo1=this.translate.currentLang,"th"==this.foo1?this.langth=!0:"en"==this.foo1&&(this.langen=!0),[2]})})},t.prototype.switchlang=function(t){"th"==t?(this.translate.use("th"),this.langen=!1,this.langth=!0):"en"==t&&(this.translate.use("en"),this.langth=!1,this.langen=!0)},t.prototype.checkpage=function(t){var e=this;switch(console.log(t),t){case"otp":console.log(this.formstep2),this.formstep2.valid?this.page="otp":this.formstep2.invalid&&(this.isNotValid=!0,this.validateAllFormFields(this.formstep2));break;case"complete":this.formotp.valid?this.navigate(""):this.formotp.invalid&&(this.isNotValid=!0,this.validateAllFormFields(this.formotp));break;case"signup2":if(console.log(this.form),this.form.valid){this.isNotValid=!1;var r=this.form.controls.tel.value;r="66"+(r=r.slice(1,10));var o={PreName:this.form.controls.prefix.value,FirstName:this.form.controls.firstname.value,LastName:this.form.controls.lastname.value,IDCardNo:this.form.controls.IDcard.value,Email:this.form.controls.email.value,Mobile:this.form.controls.tel.value};this.authenticationService.validateMember(o).subscribe(function(t){console.log(t),e.customer=t},function(t){console.log(t)});var i=this.form.controls.tel.value;this.blind=i[0]+i[1]+i[2]+"-XXXXX"+i[8]+i[9],console.log(this.blind)}else this.isNotValid=!0,this.validateAllFormFields(this.form);break;default:this.page="signup1",console.log(this.page)}},t.prototype.createFormValidate=function(){this.form=this.fb.group({firstname:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{2,15}$/)]],lastname:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{2,15}$/)]],email:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)]],tel:[null,[forms_1.Validators.required,forms_1.Validators.minLength(10),forms_1.Validators.maxLength(10),forms_1.Validators.pattern(/^(0)[0-9]*$/)]],IDcard:[null,[forms_1.Validators.required]],prefix:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{3,15}$/)]],recaptcha:[null,[forms_1.Validators.required]]}),this.formstep2=this.fb.group({username:[null,[forms_1.Validators.required,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^[A-Za-z0-9]{8,16}$/)]],password:[null,[forms_1.Validators.required,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^[a-zA-Z0-9]{8,16}$/)]],repeatPassword:[null,[forms_1.Validators.required,passwordConfirming,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^[a-zA-Z0-9]{8,16}$/)]]}),this.formotp=this.fb.group({otp:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[0-9]*$/)]]})},t.prototype.isFieldNotValid=function(t){return!this.form.get(t).valid&&this.form.get(t).touched},t.prototype.ValidatorDisplayCss=function(t){return{"has-danger":this.isFieldNotValid(t)}},t.prototype.isFieldNotValid2=function(t){return!this.formstep2.get(t).valid&&this.formstep2.get(t).touched},t.prototype.ValidatorDisplayCss2=function(t){return{"has-danger":this.isFieldNotValid2(t)}},t.prototype.isFieldNotValid4=function(t){return!this.formotp.get(t).valid&&this.formotp.get(t).touched},t.prototype.ValidatorDisplayCss4=function(t){return{"has-danger":this.isFieldNotValid4(t)}},t.prototype.validateAllFormFields=function(r){var o=this;Object.keys(r.controls).forEach(function(t){var e=r.get(t);e instanceof forms_1.FormControl?e.markAsTouched({onlySelf:!0}):e instanceof forms_1.FormGroup&&o.validateAllFormFields(e)})},t.prototype.navigate=function(t){t=t;console.log(t),this.router.navigate([t],{relativeTo:this.route})},t.prototype.numberOnly=function(t){var e=t.which?t.which:t.keyCode;return!(31<e&&(e<48||57<e))},t=__decorate([core_1.Component({selector:"app-register",templateUrl:"./register.component.html",styleUrls:["./register.component.scss"]})],t)}();exports.RegisterComponent=RegisterComponent;