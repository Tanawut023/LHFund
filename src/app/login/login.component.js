"use strict";var __decorate=this&&this.__decorate||function(t,o,i,r){var s,e=arguments.length,a=e<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,o,i,r);else for(var l=t.length-1;0<=l;l--)(s=t[l])&&(a=(e<3?s(a):3<e?s(o,i,a):s(o,i))||a);return 3<e&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),core_2=require("@angular/core"),forms_1=require("@angular/forms"),LoginComponent=function(){function t(t,o,i,r,s){this.el=t,this.fb=o,this.router=i,this.modalService=r,this.translate=s,this.page="signin",this.buttonotp="",this.errorMessage=Object,this.isNotValid=!1,this.profile={},this.blind="",this.changepassword="check",this.display=!1,this.comfirmchange=!1,s.addLangs(["th","en"])}return t.prototype.ngOnInit=function(){this.createFormValidate(),this.page="signin",this.display=!0,this.langth=!0},t.prototype.ngAfterViewInit=function(){},t.prototype.switchlang=function(t){"th"==t?(this.translate.use("th"),this.langen=!1,this.langth=!0):"en"==t&&(this.translate.use("en"),this.langth=!1,this.langen=!0)},t.prototype.checkpage=function(t){switch(console.log(t),t){case"signin":this.page="signin",this.comfirmchange=!1;break;case"check-otp":this.formotp.valid?this.page="signin":this.formotp.invalid&&(this.isNotValid=!0,this.validateAllFormFields(this.formotp));break;case"myport":this.formsighin.valid?this.router.navigate(["myport"]):(this.isNotValid=!0,this.validateAllFormFields(this.formsighin));break;case"forgotpassword":this.page="forgotpassword";break;case"changepassword":this.formotp.valid?this.page="changepassword":(this.isNotValid=!0,this.validateAllFormFields(this.formotp));break;case"confirm-change":this.formchange.valid?this.comfirmchange=!0:(this.isNotValid=!0,this.validateAllFormFields(this.formchange));break;case"otp-forgot":this.formforgot.valid?(this.buttonotp="forgot",this.page="otp"):(this.isNotValid=!0,this.validateAllFormFields(this.formforgot));break;case"otp-signup":this.formstep2.valid?(this.buttonotp="signup",this.page="otp"):(this.isNotValid=!0,this.validateAllFormFields(this.formstep2)),console.log(this.buttonotp);break;case"signup1":this.page="signup1";break;case"signup2":if(console.log(this.form),this.form.valid){this.page="signup2";var o=this.form.controls.tel.value;this.blind=o[0]+o[1]+o[2]+"-XXXXX"+o[8]+o[9],console.log(this.blind),console.log(this.profile)}else this.isNotValid=!0,this.validateAllFormFields(this.form);break;default:this.page="signin",console.log(this.page)}},t.prototype.isFieldNotValid=function(t){return!this.form.get(t).valid&&this.form.get(t).touched},t.prototype.ValidatorDisplayCss=function(t){return{"has-danger":this.isFieldNotValid(t)}},t.prototype.isFieldNotValid1=function(t){return!this.formsighin.get(t).valid&&this.formsighin.get(t).touched},t.prototype.ValidatorDisplayCss1=function(t){return{"has-danger":this.isFieldNotValid1(t)}},t.prototype.isFieldNotValid2=function(t){return!this.formstep2.get(t).valid&&this.formstep2.get(t).touched},t.prototype.ValidatorDisplayCss2=function(t){return{"has-danger":this.isFieldNotValid2(t)}},t.prototype.isFieldNotValid3=function(t){return!this.formforgot.get(t).valid&&this.formforgot.get(t).touched},t.prototype.ValidatorDisplayCss3=function(t){return{"has-danger":this.isFieldNotValid3(t)}},t.prototype.isFieldNotValid4=function(t){return!this.formotp.get(t).valid&&this.formotp.get(t).touched},t.prototype.ValidatorDisplayCss4=function(t){return{"has-danger":this.isFieldNotValid4(t)}},t.prototype.isFieldNotValid5=function(t){return!this.formchange.get(t).valid&&this.formchange.get(t).touched},t.prototype.ValidatorDisplayCss5=function(t){return{"has-danger":this.isFieldNotValid5(t)}},t.prototype.numberOnly=function(t){var o=t.which?t.which:t.keyCode;return!(31<o&&(o<48||57<o))},t.prototype.createFormValidate=function(){this.form=this.fb.group({firstname:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{2,15}$/)]],lastname:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{2,15}$/)]],email:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)]],tel:[null,[forms_1.Validators.required,forms_1.Validators.minLength(10),forms_1.Validators.maxLength(10),forms_1.Validators.pattern(/^(0)[0-9]*$/)]],IDcard:[null,[forms_1.Validators.required,forms_1.Validators.minLength(7),forms_1.Validators.pattern(/^[A-Za-z0-9]*$/)]],prefix:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-zก-๗]{3,15}$/)]],recaptcha:[null,[forms_1.Validators.required]]}),this.formsighin=this.fb.group({username:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[A-Za-z0-9]+(?:[_-][A-Za-z0-9]+)*$/)]],password:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[a-zA-Z0-9]{6,16}$/)]]}),this.formstep2=this.fb.group({username:[null,[forms_1.Validators.required,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^[A-Za-z0-9]+(?:[_-][A-Za-z0-9]+)*$/)]],password:[null,[forms_1.Validators.required,forms_1.Validators.minLength(6),forms_1.Validators.pattern(/^[a-zA-Z0-9]{6,16}$/)]],repeatPassword:[null,[forms_1.Validators.required,forms_1.Validators.minLength(6),forms_1.Validators.pattern(/^[a-zA-Z0-9]{6,16}$/)]]}),this.formotp=this.fb.group({otp:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[0-9]*$/)]]}),this.formforgot=this.fb.group({email:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/)]],IDcard:[null,[forms_1.Validators.required,forms_1.Validators.minLength(7),forms_1.Validators.pattern(/^[A-Za-z0-9]*$/)]]}),this.formchange=this.fb.group({password:[null,[forms_1.Validators.required,forms_1.Validators.minLength(6),forms_1.Validators.pattern(/^[a-zA-Z0-9]{6,16}$/)]],repeatPassword:[null,[forms_1.Validators.required,forms_1.Validators.minLength(6),forms_1.Validators.pattern(/^[a-zA-Z0-9]{6,16}$/)]]})},t.prototype.validateAllFormFields=function(i){var r=this;Object.keys(i.controls).forEach(function(t){var o=i.get(t);o instanceof forms_1.FormControl?o.markAsTouched({onlySelf:!0}):o instanceof forms_1.FormGroup&&r.validateAllFormFields(o)})},t.prototype.showDialog=function(){this.display=!0},t.prototype.hideDialog=function(){this.display=!1},__decorate([core_1.ViewChild("disclaimer")],t.prototype,"elName",void 0),t=__decorate([core_1.Component({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.scss"]}),core_2.Directive({selector:"[myMatchHeight]"})],t)}();exports.LoginComponent=LoginComponent;