"use strict";var __decorate=this&&this.__decorate||function(t,e,o,l){var r,n=arguments.length,i=n<3?e:null===l?l=Object.getOwnPropertyDescriptor(e,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,l);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(i=(n<3?r(i):3<n?r(e,o,i):r(e,o))||i);return 3<n&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),operators_1=require("rxjs/operators"),http_1=require("@angular/common/http"),LtfConditionCompleteComponent=function(){function t(t,e,o){this.basedataservice=t,this.rmflmfservice=e,this.langservice=o,this.userall={},this.userselect={},this.unitholderno="init",this.orderltf={},this.totalnav=0,this.totalunit=0,this.nolist=!1}return t.prototype.ngOnInit=function(){var e=this;this.getSelectListUnitholder(),$("#mutual-tab-menu").find("li").removeClass("current"),$("#mutual-tab-menu").find("li#menu1").addClass("current"),this.langservice.listen().subscribe(function(t){console.log(t),e.lang=t})},t.prototype.onChange=function(){this.reset();for(var t=0;t<this.userall.unitholderlist.length;t++)this.userall.unitholderlist[t].UnitholderId==this.unitholderno.UnitholderId&&(this.userselect=this.userall.unitholderlist[t]);this.getorderltf()},t.prototype.getSelectListUnitholder=function(){var e=this;this.basedataservice.getSelectListUnitholder().pipe(operators_1.first()).subscribe(function(t){setTimeout(function(){$(".selectpicker").selectpicker("refresh")},100),e.userall=t,e.unitholderno=e.userall.unitholderlist[0],e.userselect=e.userall.unitholderlist[0],e.getorderltf()},function(t){console.log(t)})},t.prototype.getorderltf=function(){var d=this;this.nolist=!1;var t=(new http_1.HttpParams).set("unitholderid",this.userselect.UnitholderId);this.rmflmfservice.getorderltf(t).pipe(operators_1.first()).subscribe(function(t){if(console.log(t),d.orderltf=t,d.orderltf.ltflist){for(var e=0,o=0,l=0,r=new Array,n={nav:0,unit:0,islast:null,FundCode:null},i=0;i<d.orderltf.ltflist.length;i++){var s;console.log("fory");var u={nav:0,unit:0,islast:null,FundCode:null};s&&(console.log("obj"),d.orderltf.ltflist[i].FundID!==s.FundID&&(console.log(d.orderltf.ltflist[i].FundID+"-"+s.FundID),u.nav=e,u.unit=o,u.FundCode=s.FundCode,u.islast=!0,r.push(u),l=e=o=0,console.log(i))),d.totalnav+=parseFloat(d.orderltf.ltflist[i].NAV),d.totalunit+=parseFloat(d.orderltf.ltflist[i].BalanceAmount),e+=parseFloat(d.orderltf.ltflist[i].NAV),o+=parseFloat(d.orderltf.ltflist[i].BalanceAmount),s=d.orderltf.ltflist[i],0==l&&d.orderltf.ltflist[i].FundID==s.FundID&&(s.FundNameGroup=d.orderltf.ltflist[i].FundName,s.FundNameEngGroup=d.orderltf.ltflist[i].FundNameEng,s.FundCodeGroup=d.orderltf.ltflist[i].FundCode),r.push(s),i+1==d.orderltf.ltflist.length&&(n.nav=e,n.unit=o,n.FundCode=s.FundCode,n.islast=!0,console.log("something")),l++}r.push(n),d.ltflist=r,console.log(d.ltflist)}else d.nolist=!0,console.log("notlist")},function(t){console.log(t)})},t.prototype.reset=function(){this.orderltf={}},t.prototype.print=function(){window.focus(),window.print()},t=__decorate([core_1.Component({selector:"app-ltf-condition-complete",templateUrl:"./ltf-condition-complete.component.html",styleUrls:["./ltf-condition-complete.component.scss"]})],t)}();exports.LtfConditionCompleteComponent=LtfConditionCompleteComponent;