"use strict";function passwordConfirming(e){if(e.parent&&e){var t=e.parent.get("newpassword"),r=e.parent.get("confirmpassword");if(t&&r)return t.value!==r.value?{invalid:!0}:void 0}}var __decorate=this&&this.__decorate||function(e,t,r,o){var s,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;0<=n;n--)(s=e[n])&&(i=(a<3?s(i):3<a?s(t,r,i):s(t,r))||i);return 3<a&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),operators_1=require("rxjs/operators"),http_1=require("@angular/common/http"),forms_1=require("@angular/forms"),ChangepasswordComponent=function(){function e(e,t,r,o){this.fb=e,this.basedataservice=t,this.profileservice=r,this.toastr=o,this.userall={},this.userselect={},this.unitholderno="init",this.isNotValid=!1,this.res={}}return Object.defineProperty(e.prototype,"cpwd",{get:function(){return this.formchangepass.get("confirmpassword")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.createFormValidate(),this.getSelectListUnitholder(),$("#mutual-tab-menu").find("li").removeClass("current"),$("#mutual-tab-menu").find("li#menu3").addClass("current")},e.prototype.onChange=function(){for(var e=0;e<this.userall.unitholderlist.length;e++)this.userall.unitholderlist[e].UnitholderId==this.unitholderno.UnitholderId&&(this.userselect=this.userall.unitholderlist[e])},e.prototype.getSelectListUnitholder=function(){var t=this;this.basedataservice.getSelectListUnitholder().pipe(operators_1.first()).subscribe(function(e){t.userall=e,t.unitholderno=t.userall.unitholderlist[0],t.userselect=t.userall.unitholderlist[0]},function(e){console.log(e)})},e.prototype.createFormValidate=function(){this.formchangepass=this.fb.group({currentpassword:[null,[forms_1.Validators.required,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^(?=.*[A-Z])(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/)]],newpassword:[null,[forms_1.Validators.required,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^(?=.*[A-Z])(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/)]],confirmpassword:[null,[forms_1.Validators.required,passwordConfirming,forms_1.Validators.minLength(8),forms_1.Validators.pattern(/^(?=.*[A-Z])(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/)]]}),this.formotp=this.fb.group({otp:[null,[forms_1.Validators.required,forms_1.Validators.pattern(/^[0-9]*$/)]]})},e.prototype.onSubmit=function(){var t=this;console.log(this.formchangepass),this.formchangepass.valid?(this.isNotValid=!1,this.profileservice.submitchangepassword().pipe(operators_1.first()).subscribe(function(e){console.log(e),t.res=e,$("#otpchangepassword").modal({backdrop:"static",keyboard:!1,show:!0})},function(e){console.log(e),t.toastr.error("",e.error.messages)})):(this.isNotValid=!0,this.validateAllFormFields(this.formchangepass))},e.prototype.updatepassword=function(){var e=new http_1.HttpParams;e=(e=e.append("otp",this.formotp.controls.otp.value)).append("refcode",this.res.refcode);this.formchangepass.controls.username.value,this.formchangepass.controls.password.value,this.formchangepass.controls.repeatPassword.value},e.prototype.validateAllFormFields=function(r){var o=this;Object.keys(r.controls).forEach(function(e){var t=r.get(e);t instanceof forms_1.FormControl?t.markAsTouched({onlySelf:!0}):t instanceof forms_1.FormGroup&&o.validateAllFormFields(t)})},e.prototype.isFieldNotValid=function(e){return!this.formchangepass.get(e).valid&&this.formchangepass.get(e).touched},e.prototype.ValidatorDisplayCss=function(e){return{"has-danger":this.isFieldNotValid(e)}},e.prototype.numberOnly=function(e){var t=e.which?e.which:e.keyCode;return!(31<t&&(t<48||57<t))},e=__decorate([core_1.Component({selector:"app-changepassword",templateUrl:"./changepassword.component.html",styleUrls:["./changepassword.component.scss"]})],e)}();exports.ChangepasswordComponent=ChangepasswordComponent;